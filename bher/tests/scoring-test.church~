(define samples 150)
(define lag 20)
(define runs 5)
(define error-tolerance 0.07)

(check-test (repeat runs
                    (lambda ()
                      (mh-query samples lag
                                (define tree (gen-tree))
                                (define obs (smc-obs-marginalize tree 10))
                                (if (equal? (lazy-list->all-list tree) '(node a)) 1 0)
                                (obs (lazy-list 'a)))))
            (lambda (b) b)
            (/ 1 5)
            error-tolerance
            "scoring a single node")